---
import { Image } from 'astro:assets';
import { slugify } from '../utils';
import FormattedDate from './FormattedDate.astro';
import type { CollectionEntry } from 'astro:content';

type BlogPost = CollectionEntry<'blog'>;
const { post }: Record<string, any> | { post: BlogPost } = Astro.props;
---

<div class='flex flex-col md:flex-row gap-2 py-2 md:items-center justify-between first:border-t border-b capitalize first:dark:border-t-zinc-700 dark:border-b-zinc-700'>
  <div class="flex flex-row gap-2">
  	{
  		post.data.coverImage && (
  			<Image src={post.data.coverImage} alt={post.data.title} width={80} height={60} class='max-w-20 max-h-16 rounded-md object-center object-cover' />
  		)
  	}

  	<div>
  		<div class='text-zinc-700 text-sm w-24 dark:text-zinc-300 shrink-0'>
  			<FormattedDate date={post.data.pubDate} />
  		</div>
  		<h3 class='font-medium grow'>
  			<a href={`/${post.id}/`}>
  				{post.data.title}
  			</a>
  		</h3>
  	</div>
  </div>

	<div class='flex gap-2 flex-wrap shrink-0'>
		{
			(post.data.tags || [])?.map((tag: string) => (
				<a
					class='border border-zinc-300 dark:border-zinc-700 rounded-2xl
             text-sm text-zinc-700 dark:text-zinc-300 no-underline px-2 py-0.5
             transition-all duration-700
             hover:border-zinc-700 dark:hover:border-zinc-300 h-fit'
					href={`/tags/${slugify(tag)}`}>
					{tag}
				</a>
			))
		}
	</div>
</div>
